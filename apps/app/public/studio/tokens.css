#centerCanvas {
  /* typography (Inter first) */
  --font-ui: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;

  /* base sizes */
  --fs-body: 1rem;        /* 16px default body */
  --fs-ui: 0.9375rem;     /* 15px default UI */
  --lh-body: 1.5;

  /* size scale */
  --fs-10: 0.625rem;      /* 10px (labels only) */
  --fs-11: 0.6875rem;     /* 11px (labels only) */
  --fs-12: 0.75rem;       /* 12px */
  --fs-14: 0.875rem;      /* 14px */
  --fs-15: 0.9375rem;     /* 15px */
  --fs-16: 1rem;          /* 16px */
  --fs-18: 1.125rem;      /* 18px */
  --fs-20: 1.25rem;       /* 20px */
  --fs-24: 1.5rem;        /* 24px */
  --fs-32: 2rem;          /* 32px */
  --fs-fluid-title: clamp(1.5rem, 1.1rem + 1.6vw, 3rem);

  /* line-heights */
  --lh-tight: 1.25;
  --lh-normal: 1.5;
  --lh-loose: 1.75;

  /* spacing (4px grid) */
  --space-1: 0.25rem;   /* 4px */
  --space-2: 0.5rem;    /* 8px */
  --space-3: 0.75rem;   /* 12px */
  --space-4: 1rem;      /* 16px */
  --space-5: 1.25rem;   /* 20px */
  --space-6: 1.5rem;    /* 24px */
  --space-7: 1.75rem;   /* 28px */
  --space-8: 2rem;      /* 32px */
  --space-9: 2.25rem;   /* 36px */
  --space-10: 2.5rem;   /* 40px */

  /* base colors (Apple-like vibe) */
  --color-bg: #ffffff;
  --color-surface: #f6f7f9;
  --color-text: #0b0b0f;
  --color-text-muted: rgba(11,11,15,0.56);
  --color-border: rgba(10,10,12,0.16);
  --color-accent: #0a84ff;   /* primary accent */

  /* role colors (semantic) */
  --role-primary-bg: var(--color-accent);
  --role-primary-text: #ffffff;

  --role-success-bg: #34c759;
  --role-success-text: #0b0b0f;

  --role-warn-bg: #ff9f0a;
  --role-warn-text: #0b0b0f;

  --role-danger-bg: #ff3b30;
  --role-danger-text: #ffffff;

  --role-surface-bg: var(--color-surface);
  --role-surface-text: var(--color-text);
  --role-border: var(--color-border);

  /* state layers (opacity overlays) */
  --state-hover-alpha-on-surface: 0.06;
  --state-active-alpha-on-surface: 0.10;
  --state-hover-alpha-on-primary: 0.12;
  --state-active-alpha-on-primary: 0.18;

  /* accessibility tokens */
  --focus-ring-width: 2px;
  --focus-ring-color: var(--color-accent);
  --focus-ring-offset: 2px;
  --min-touch-target: 2.75rem;        /* 44px */
  --kbd-bg: #111;
  --kbd-text: #fff;

  /* high contrast helpers */
  --hc-focus-ring-color: #000;
  --hc-border: #000;
  --hc-link: #0042cc;

  /* radius */
  --radius-4: 0.5rem;
}

@media (prefers-color-scheme: dark) {
  #centerCanvas {
    --color-bg: #0e0f13;
    --color-surface: #14161b;
    --color-text: #f5f6f8;
    --color-text-muted: rgba(245,246,248,0.72);
    --color-border: rgba(250,250,255,0.18);

    --state-hover-alpha-on-surface: 0.08;
    --state-active-alpha-on-surface: 0.12;
    --state-hover-alpha-on-primary: 0.10;
    --state-active-alpha-on-primary: 0.16;

    --kbd-bg: #eee;
    --kbd-text: #111;
  }
}

#centerCanvas[data-theme="hc"] {
  --color-bg: #ffffff;
  --color-surface: #ffffff;
  --color-text: #000000;
  --color-text-muted: #1a1a1a;
  --color-border: #1a1a1a;
  --color-accent: #0042cc;

  --role-primary-bg: var(--color-accent);
  --role-primary-text: #ffffff;
  --role-success-bg: #006e2a;
  --role-success-text: #ffffff;
  --role-warn-bg: #a65e00;
  --role-warn-text: #ffffff;
  --role-danger-bg: #8c0000;
  --role-danger-text: #ffffff;

  --state-hover-alpha-on-surface: 0.10;
  --state-active-alpha-on-surface: 0.16;
  --state-hover-alpha-on-primary: 0.14;
  --state-active-alpha-on-primary: 0.22;

  --focus-ring-color: var(--hc-focus-ring-color);
  --role-border: var(--hc-border);
}

/* Typography utilities */
.text-10 { font: 500 var(--fs-10)/var(--lh-tight) var(--font-ui); letter-spacing: 0.02em; }
.text-11 { font: 500 var(--fs-11)/var(--lh-tight) var(--font-ui); letter-spacing: 0.02em; }
.text-12 { font: 500 var(--fs-12)/var(--lh-tight) var(--font-ui); }
.text-14 { font: 400 var(--fs-14)/var(--lh-normal) var(--font-ui); }
.text-15 { font: 400 var(--fs-15)/var(--lh-normal) var(--font-ui); }
.text-16 { font: 400 var(--fs-16)/var(--lh-normal) var(--font-ui); }
.text-18 { font: 500 var(--fs-18)/var(--lh-normal) var(--font-ui); }
.text-20 { font: 600 var(--fs-20)/var(--lh-normal) var(--font-ui); }
.text-24 { font: 600 var(--fs-24)/var(--lh-tight) var(--font-ui); }
.text-32 { font: 700 var(--fs-32)/var(--lh-tight) var(--font-ui); }
.text-title-fluid { font: 700 var(--fs-fluid-title)/1.15 var(--font-ui); }

/* Spacing utilities */
.m-1{margin:var(--space-1)}.m-2{margin:var(--space-2)}.m-3{margin:var(--space-3)}.m-4{margin:var(--space-4)}.m-5{margin:var(--space-5)}.m-6{margin:var(--space-6)}.m-7{margin:var(--space-7)}.m-8{margin:var(--space-8)}.m-9{margin:var(--space-9)}.m-10{margin:var(--space-10)}
.p-1{padding:var(--space-1)}.p-2{padding:var(--space-2)}.p-3{padding:var(--space-3)}.p-4{padding:var(--space-4)}.p-5{padding:var(--space-5)}.p-6{padding:var(--space-6)}.p-7{padding:var(--space-7)}.p-8{padding:var(--space-8)}.p-9{padding:var(--space-9)}.p-10{padding:var(--space-10)}
.mx-1{margin-left:var(--space-1);margin-right:var(--space-1)}.mx-2{margin-left:var(--space-2);margin-right:var(--space-2)}.mx-3{margin-left:var(--space-3);margin-right:var(--space-3)}.mx-4{margin-left:var(--space-4);margin-right:var(--space-4)}.mx-5{margin-left:var(--space-5);margin-right:var(--space-5)}.mx-6{margin-left:var(--space-6);margin-right:var(--space-6)}.mx-7{margin-left:var(--space-7);margin-right:var(--space-7)}.mx-8{margin-left:var(--space-8);margin-right:var(--space-8)}.mx-9{margin-left:var(--space-9);margin-right:var(--space-9)}.mx-10{margin-left:var(--space-10);margin-right:var(--space-10)}
.my-1{margin-top:var(--space-1);margin-bottom:var(--space-1)}.my-2{margin-top:var(--space-2);margin-bottom:var(--space-2)}.my-3{margin-top:var(--space-3);margin-bottom:var(--space-3)}.my-4{margin-top:var(--space-4);margin-bottom:var(--space-4)}.my-5{margin-top:var(--space-5);margin-bottom:var(--space-5)}.my-6{margin-top:var(--space-6);margin-bottom:var(--space-6)}.my-7{margin-top:var(--space-7);margin-bottom:var(--space-7)}.my-8{margin-top:var(--space-8);margin-bottom:var(--space-8)}.my-9{margin-top:var(--space-9);margin-bottom:var(--space-9)}.my-10{margin-top:var(--space-10);margin-bottom:var(--space-10)}
.px-1{padding-left:var(--space-1);padding-right:var(--space-1)}.px-2{padding-left:var(--space-2);padding-right:var(--space-2)}.px-3{padding-left:var(--space-3);padding-right:var(--space-3)}.px-4{padding-left:var(--space-4);padding-right:var(--space-4)}.px-5{padding-left:var(--space-5);padding-right:var(--space-5)}.px-6{padding-left:var(--space-6);padding-right:var(--space-6)}.px-7{padding-left:var(--space-7);padding-right:var(--space-7)}.px-8{padding-left:var(--space-8);padding-right:var(--space-8)}.px-9{padding-left:var(--space-9);padding-right:var(--space-9)}.px-10{padding-left:var(--space-10);padding-right:var(--space-10)}
.py-1{padding-top:var(--space-1);padding-bottom:var(--space-1)}.py-2{padding-top:var(--space-2);padding-bottom:var(--space-2)}.py-3{padding-top:var(--space-3);padding-bottom:var(--space-3)}.py-4{padding-top:var(--space-4);padding-bottom:var(--space-4)}.py-5{padding-top:var(--space-5);padding-bottom:var(--space-5)}.py-6{padding-top:var(--space-6);padding-bottom:var(--space-6)}.py-7{padding-top:var(--space-7);padding-bottom:var(--space-7)}.py-8{padding-top:var(--space-8);padding-bottom:var(--space-8)}.py-9{padding-top:var(--space-9);padding-bottom:var(--space-9)}.py-10{padding-top:var(--space-10);padding-bottom:var(--space-10)}

.muted { color: var(--color-text-muted); }

/* Color role utilities */
.bg-surface { background: var(--role-surface-bg); color: var(--role-surface-text); }
.bg-primary { background: var(--role-primary-bg); color: var(--role-primary-text); }
.bg-success { background: var(--role-success-bg); color: var(--role-success-text); }
.bg-warn { background: var(--role-warn-bg); color: var(--role-warn-text); }
.bg-danger { background: var(--role-danger-bg); color: var(--role-danger-text); }
.border-default { border: 1px solid var(--role-border); }

/* State layer helpers */
.state-surface:hover { background: linear-gradient(0deg, rgba(0,0,0,var(--state-hover-alpha-on-surface)), rgba(0,0,0,var(--state-hover-alpha-on-surface))), var(--role-surface-bg); }
.state-surface:active { background: linear-gradient(0deg, rgba(0,0,0,var(--state-active-alpha-on-surface)), rgba(0,0,0,var(--state-active-alpha-on-surface))), var(--role-surface-bg); }
.state-primary:hover { background: linear-gradient(0deg, rgba(255,255,255,var(--state-hover-alpha-on-primary)), rgba(255,255,255,var(--state-hover-alpha-on-primary))), var(--role-primary-bg); }
.state-primary:active { background: linear-gradient(0deg, rgba(255,255,255,var(--state-active-alpha-on-primary)), rgba(255,255,255,var(--state-active-alpha-on-primary))), var(--role-primary-bg); }

/* Demo components */
.diet-surface { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-4); padding: var(--space-6); }
.diet-btn {
  font: 500 var(--fs-ui)/1 var(--font-ui);
  color: #fff;
  background: var(--color-accent);
  border: 0;
  border-radius: var(--radius-4);
  padding: 0.625rem 1rem;
  min-height: var(--min-touch-target);
  cursor: pointer;
}
.diet-btn:focus-visible { outline: var(--focus-ring-width) solid var(--focus-ring-color); outline-offset: var(--focus-ring-offset); }
.diet-btn:hover { background: linear-gradient(0deg, rgba(255,255,255,var(--state-hover-alpha-on-primary)), rgba(255,255,255,var(--state-hover-alpha-on-primary))), var(--color-accent); }
.diet-btn:active { background: linear-gradient(0deg, rgba(255,255,255,var(--state-active-alpha-on-primary)), rgba(255,255,255,var(--state-active-alpha-on-primary))), var(--color-accent); }

.diet-link { color: var(--color-accent); text-decoration: none; }
.diet-link:hover { text-decoration: underline; }
.diet-link:focus-visible { outline: var(--focus-ring-width) solid var(--focus-ring-color); outline-offset: var(--focus-ring-offset); }

.kbd {
  display:inline-block; padding: 0.1rem 0.35rem; border-radius: 0.35rem;
  background: var(--kbd-bg); color: var(--kbd-text);
  font: 600 var(--fs-12)/1 var(--font-ui);
}

/* Visually hidden (screen-reader only) */
.sr-only {
  position:absolute !important; width:1px !important; height:1px !important;
  padding:0 !important; margin:-1px !important; overflow:hidden !important;
  clip:rect(0,0,0,0) !important; white-space:nowrap !important; border:0 !important;
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}
