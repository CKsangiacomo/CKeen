<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Studio Shell Demo</title>
    <link rel="stylesheet" href="dist/tokens.css" />
    <link rel="stylesheet" href="dist/studio.css" />
    <style>
      html, body { height: 100%; margin: 0; }
    </style>
  </head>
  <body>
    <div class="studio-grid">
      <div class="studio-topbar">
        <strong>Studio</strong>
        <div class="studio-controls">
          <div class="segmented" id="themeCtl">
            <button data-theme="light" aria-pressed="true">Light</button>
            <button data-theme="dark">Dark</button>
          </div>
          <div class="segmented" id="viewportCtl">
            <button data-viewport="desktop" aria-pressed="true">Desktop</button>
            <button data-viewport="mobile">Mobile</button>
          </div>
        </div>
      </div>
      <div id="slot-templateRow" class="studio-template-row"></div>
      <div id="slot-left" class="panel panel-left">
        <div style="padding:12px">Left panel<br/>Lorem ipsum dolor sit amet.</div>
        <button id="toggleLeft" style="margin:12px">Toggle Left</button>
      </div>
      <div id="slot-center" class="panel panel-center">
        <div id="centerCanvas" class="studio-theme-light studio-viewport-desktop">
          <div style="padding:24px">
            <h2>Center Canvas</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.</p>
          </div>
        </div>
      </div>
      <div id="slot-right" class="panel panel-right">
        <div style="padding:12px">Right panel<br/>Duis aute irure dolor in reprehenderit.</div>
        <button id="toggleRight" style="margin:12px">Toggle Right</button>
      </div>
    </div>

    <script src="dist/studio.js"></script>
    <script>
      Studio.ready().then(() => {
        // Controls
        const themeCtl = document.getElementById('themeCtl');
        const viewportCtl = document.getElementById('viewportCtl');
        themeCtl.addEventListener('click', (e) => {
          const btn = e.target.closest('button'); if (!btn) return;
          themeCtl.querySelectorAll('button').forEach(b => b.setAttribute('aria-pressed','false'));
          btn.setAttribute('aria-pressed','true');
          Studio.setTheme(btn.dataset.theme, 'user');
        });
        viewportCtl.addEventListener('click', (e) => {
          const btn = e.target.closest('button'); if (!btn) return;
          viewportCtl.querySelectorAll('button').forEach(b => b.setAttribute('aria-pressed','false'));
          btn.setAttribute('aria-pressed','true');
          Studio.setViewport(btn.dataset.viewport, 'user');
        });
        document.getElementById('toggleLeft').onclick = () => Studio.togglePanel('left', undefined, 'user');
        document.getElementById('toggleRight').onclick = () => Studio.togglePanel('right', undefined, 'user');

        // Demo: mount template row content then unmount to show auto-hide
        const tmp = document.createElement('div');
        tmp.textContent = 'Template Row Content';
        Studio.mount('slot-templateRow', tmp);
        setTimeout(() => Studio.unmount('slot-templateRow'), 1500);
      });

      Studio.on('studio:theme', (p) => console.log('theme', p));
      Studio.on('studio:viewport', (p) => console.log('viewport', p));
      Studio.on('studio:panel', (p) => console.log('panel', p));
      Studio.on('studio:ready', (p) => console.log('ready', p));
    </script>
  </body>
  </html>


